<!DOCTYPE html>
<html>
<head>
    <title>Sentence Splitter (ESM Default Export)</title>
    <meta charset="UTF-8"> <!-- Good practice -->
</head>
<body>
    <h1>Paste your text here:</h1>
    <textarea id="inputText" rows="10" cols="80"></textarea>
    <button id="splitButton">Split Sentences</button>
    <h2>Sentences:</h2>
    <div id="outputSentences"></div>

    <script type="module">
        // 1. Import the DEFAULT export from the module.
        //    This default export *is* the segmentation function.
        import segmentFunction from 'https://unpkg.com/sentencex@0.4.2/dist/esm/index.js';

        // (Optional) Log the imported default function
        console.log("Imported Default Function:", segmentFunction);

        // 2. Get references to your HTML elements
        const inputText   = document.getElementById('inputText');
        const splitButton = document.getElementById('splitButton');
        const outputDiv   = document.getElementById('outputSentences');

        // 3. Define your function
        function splitSentences() {
            if (!inputText) {
                console.error("Input text area not found!");
                return;
            }
            const text = inputText.value;

            // Check if the imported function exists
            // We now expect segmentFunction itself to be the function.
            if (typeof segmentFunction !== 'function') {
                 console.error("sentencex segmentation function not loaded correctly!");
                 outputDiv.innerHTML = '<p style="color: red;">Error: Sentence splitter library failed to load.</p>';
                 return;
             }

            try {
                 // Call the imported function DIRECTLY
                 const sentences = segmentFunction('auto', text); // Use the function directly

                 outputDiv.innerHTML = ''; // Clear previous output

                 sentences.forEach(sentenceText => {
                     const p = document.createElement('p');
                     p.textContent = sentenceText;
                     outputDiv.appendChild(p);
                 });
            } catch (error) {
                 console.error("Error during sentence segmentation:", error);
                 outputDiv.innerHTML = `<p style="color: red;">Error splitting sentences: ${error.message}</p>`;
            }
        }

        // 4. Attach the event listener programmatically
        if (splitButton) {
            splitButton.addEventListener('click', splitSentences);
        } else {
            console.error("Split button not found!");
        }

    </script>
</body>
</html>